---
title: "Troubleshooting guide"
description: "Common issues and fixes across installation, sync, team mode, exporters, and CI."
---

# Troubleshooting guide

Common issues and actionable solutions organized by workflow stage.

## Quick error lookup

Jump directly to your issue:

**Installation:**

- [Node version mismatch](#node-version-mismatch)
- [pnpm not found](#pnpm-not-found)

**Initialization:**

- [Already initialized](#already-initialized)
- [No agents detected](#no-agents-detected)
- [Permission denied](#permission-denied-creating-files)

**Sync:**

- [Config not found](#config-not-found)
- [Source file not found](#source-file-not-found)
- [Lockfile drift](#lockfile-drift-team-mode)
- [Exporter failures](#exporter-failures)
- [Agents not reading rules](#agents-not-reading-rules)

**CI/CD:**

- [Schema validation failures](#schema-validation-failures)
- [Lockfile strict mode failures](#lockfile-strict-mode-failures)
- [Exit code meanings](#exit-code-meanings)

**Platform-specific:**

- [Windows path separators](#windows-path-separators)
- [File permissions (Unix/macOS)](#file-permissions-on-unixmacos)

**Still stuck?** See [Getting more help](#getting-more-help)

---

## Installation issues

### Node version mismatch

**Error:**

```
error @aligntrue/cli@0.1.0: The engine "node" is incompatible with this module.
Expected version ">=22.0.0". Got "18.16.0"
```

**Cause:** AlignTrue requires Node.js 22 or later.

**Fix:**

```bash
# Check your Node version
node --version

# Upgrade Node.js
# Using nvm (recommended)
nvm install 22
nvm use 22

# Or download from nodejs.org
# https://nodejs.org/
```

---

### pnpm not found

**Error:**

```
bash: pnpm: command not found
```

**Cause:** pnpm is not installed globally.

**Fix:**

<Tabs items={["npm", "yarn", "pnpm", "bun", "npx (no install)"]}>

<Tabs.Tab>```bash npm install -g pnpm ```</Tabs.Tab>

<Tabs.Tab>```bash yarn global add pnpm ```</Tabs.Tab>

<Tabs.Tab>```bash npm install -g pnpm # Bootstrap with npm ```</Tabs.Tab>

<Tabs.Tab>```bash bun install -g pnpm ```</Tabs.Tab>

<Tabs.Tab>```bash npx pnpm --version # Try without installing ```</Tabs.Tab>

</Tabs>

**Verify installation:**

```bash
pnpm --version
```

**Alternative:** Use npx to run commands without permanent installation:

<Tabs items={["npm", "yarn", "pnpm", "bun", "npx (one-off commands)"]}>

<Tabs.Tab>```bash npm install -g aligntrue ```</Tabs.Tab>

<Tabs.Tab>```bash yarn global add aligntrue ```</Tabs.Tab>

<Tabs.Tab>```bash pnpm add -g aligntrue ```</Tabs.Tab>

<Tabs.Tab>```bash bun install -g aligntrue ```</Tabs.Tab>

<Tabs.Tab>```bash npx aligntrue init ```</Tabs.Tab>

</Tabs>

---

## Init issues

### Already initialized

**Error:**

```
⚠ This project is already initialized.

Found .aligntrue/config.yaml with mode: team
```

**Causes and fixes:**

**1. Solo mode - want to re-initialize:**

```bash
# Back up existing config
mv .aligntrue/config.yaml .aligntrue/config.yaml.bak

# Re-run init
aligntrue init

# Restore custom settings from backup if needed
```

**2. Team mode - want to join existing team project:**

```bash
# Don't run init! You're joining an existing team.
# Instead:
git pull  # Get latest rules and lockfile
aligntrue sync  # Generate agent files for your machine
```

**3. Want to switch from solo to team mode:**

```bash
aligntrue team enable
```

---

### No agents detected

**Output:**

```
◇ Detected 0 AI coding agents.
│
◆ Choose agents to enable: (Use arrow keys)
```

**Cause:** AlignTrue looks for common agent markers (`.cursor/`, `AGENTS.md`, etc.) and didn't find any.

**Fix:** Manually select agents you want to use:

1. During init, choose from the multiselect list (28 agents available)
2. Or edit `.aligntrue/config.yaml` after init:

```yaml
exporters:
  - cursor
  - agents-md
  - windsurf
  # Add more as needed
```

**Verify available agents:**

```bash
aligntrue adapters list
```

---

### Permission denied creating files

**Error:**

```
Error: EACCES: permission denied, open '.aligntrue/config.yaml'
```

**Cause:** Insufficient permissions to write to project directory.

**Fix:**

```bash
# Check directory ownership
ls -la .

# Fix ownership (Unix/macOS)
sudo chown -R $USER:$USER .

# Or run with appropriate permissions
sudo aligntrue init  # Not recommended
```

**Better approach:** Run AlignTrue as your regular user in directories you own.

---

## Sync issues

### Config not found

**Error:**

```
✖ Configuration file not found: .aligntrue/config.yaml

Run 'aligntrue init' to set up your project first.
```

**Cause:** Haven't run `aligntrue init` yet, or config file was deleted.

**Fix:**

```bash
# Initialize the project
aligntrue init
```

If you deleted config by accident, recreate it:

```yaml
# .aligntrue/config.yaml
mode: solo
exporters:
  - cursor
  - agents-md
sources:
  - type: local
    path: .aligntrue/.rules.yaml
```

---

### Source file not found

**Error:**

```
✖ Source file not found: .aligntrue/.rules.yaml

Check 'sources' in .aligntrue/config.yaml
Hint: Create .rules.yaml or update source path
```

**Cause:** Rules file doesn't exist or path is wrong in config.

**Fix:**

**1. Create missing rules file:**

```bash
# Re-run init to create starter template
aligntrue init

# Or create minimal file manually
mkdir -p .aligntrue
echo 'rules: []' > .aligntrue/.rules.yaml
```

**2. Fix path in config:**

```yaml
# .aligntrue/config.yaml
sources:
  - type: local
    path: .aligntrue/.rules.yaml # Check this path
```

**3. Verify file exists:**

```bash
ls -la .aligntrue/.rules.yaml
```

---

### Lockfile drift (team mode)

**Error (soft mode):**

```
⚠ Warning: Lockfile is out of sync
  Rule 'my-project.global.code-style' hash mismatch
  Expected: a3b2c1d4...
  Actual:   e5f6a7b8...

Continuing sync (soft mode)...
```

**Error (strict mode):**

```
✖ Error: Lockfile validation failed
  Rule 'my-project.global.code-style' hash mismatch
  Expected: a3b2c1d4...
  Actual:   e5f6a7b8...

Aborting sync. Fix lockfile drift or use --force.
```

**Cause:** Rules changed since lockfile was last generated.

**Fix:**

**1. Intentional changes - regenerate lockfile:**

```bash
# Update lockfile to match current rules
aligntrue sync --force

# Or in two steps:
rm .aligntrue.lock.json
aligntrue sync
```

**2. Unintentional changes - review diff:**

```bash
# Check what changed
git diff .aligntrue/.rules.yaml

# Revert unwanted changes
git checkout .aligntrue/.rules.yaml

# Sync again
aligntrue sync
```

**3. Team workflow - pull latest:**

```bash
# Get latest lockfile from team
git pull

# Sync to your agents
aligntrue sync
```

**Change lockfile mode:**

```yaml
# .aligntrue/config.yaml
lockfile:
  mode: soft # Warn but continue (default for team mode)
  # mode: strict  # Block on mismatch (for CI)
  # mode: off     # Disable validation (solo mode)
```

---

### Exporter failures

### Agents not reading rules

**Symptoms:** Cursor ignores `.mdc` updates, Copilot/Claude responses look generic, or MCP actions cannot find AlignTrue rules.

**Fix:**

1. `aligntrue status` — confirm the exporter shows `✓ detected`, the edit sources match the file you are editing, and the config path is correct.
2. `aligntrue doctor` — verify it reports the expected files (e.g., `.cursor/rules/aligntrue.mdc`, `AGENTS.md`, `.vscode/mcp.json`) as present.
3. Open the file the exporter wrote and confirm your latest rules are there. If not, re-run `aligntrue sync`.
4. Restart the agent or IDE so it reloads the file. Most IDE agents cache `AGENTS.md` or MCP configs until restart.

See the [agent verification guide](/docs/04-reference/agent-verification) for agent-specific screenshots and command references.

---

**Error:**

```
✖ Exporter 'cursor' failed: Invalid configuration
  Output path must be a string, got undefined
```

**Cause:** Exporter configuration missing or invalid.

**Fix:**

**1. Check exporter is enabled:**

```yaml
# .aligntrue/config.yaml
exporters:
  - cursor # Make sure it's listed
```

**2. Validate IR schema:**

```bash
# Check rules are valid
aligntrue md lint
```

**3. Check exporter manifest:**

```bash
# List available exporters
aligntrue adapters list

# Verify cursor is in the list
```

**4. Reset to defaults:**

```yaml
# .aligntrue/config.yaml - minimal working config
mode: solo
exporters:
  - cursor
  - agents-md
sources:
  - type: local
    path: .aligntrue/.rules.yaml
```

---

## Check issues (CI)

### Schema validation failures

**Error:**

```
✖ Schema validation failed:
  Line 15: Missing required field 'spec_version'
  Line 23: Invalid severity 'critical' (must be: error, warn, info)
```

**Cause:** Rules don't match JSON Schema requirements.

**Common schema mistakes:**

**1. Missing required fields:**

```yaml
# ❌ Missing fields
id: my-rule
summary: Do the thing

# ✅ All required fields
id: my-project.category.my-rule
version: "1.0.0"
spec_version: "1"
rules:
  - id: do-the-thing
    summary: Do the thing
    severity: error
```

**2. Invalid severity:**

```yaml
# ❌ Wrong values
severity: critical
severity: MUST

# ✅ Valid values
severity: error   # Must fix
severity: warn    # Should fix
severity: info    # Nice to have
```

**3. Invalid rule ID pattern:**

```yaml
# ❌ Too short or special chars
id: rule1
id: my-project/rule

# ✅ Valid format (namespace.category.name)
id: my-project.backend.use-typescript
id: acme.security.no-secrets
```

**Fix:**

```bash
# Validate locally before committing
aligntrue md lint

# Or full check
aligntrue check
```

---

### Lockfile strict mode failures

**Error (CI):**

```
✖ Lockfile validation failed in strict mode
  2 rules have hash mismatches

Exit code: 1
```

**Cause:** CI is using `lockfile.mode: strict` and rules changed since last lockfile update.

**Fix:**

**1. Update lockfile in your branch:**

```bash
# Regenerate lockfile
aligntrue sync --force

# Commit updated lockfile
git add .aligntrue.lock.json
git commit -m "chore: update lockfile after rule changes"
git push
```

**2. Or temporarily use soft mode in CI:**

```yaml
# .aligntrue/config.yaml
lockfile:
  mode: soft # Warn but don't block CI
```

---

### Exit code meanings

**Exit code 0 - Success:**

All validations passed. Safe to merge.

**Exit code 1 - Validation error:**

- Schema validation failed
- Lockfile drift detected (strict mode)
- User-fixable issues

**Action:** Fix the validation errors and retry.

**Exit code 2 - System error:**

- Config file not found
- Permissions error
- Disk space issues
- Unexpected failures

**Action:** Check system logs, verify file permissions, ensure sufficient disk space.

---

## Platform-specific issues

### Windows path separators

**Issue:** Windows uses backslashes (`\`) but AlignTrue config uses forward slashes (`/`).

**Not a problem!** AlignTrue automatically normalizes paths:

```yaml
# ✅ Both work on Windows
path: .aligntrue/.rules.yaml
path: .aligntrue\.rules.yaml

# Internally converted to forward slashes
```

**Recommendation:** Use forward slashes in config for cross-platform compatibility.

---

### File permissions on Unix/macOS

**Error:**

```
Error: EACCES: permission denied
```

**Cause:** File or directory lacks write permissions.

**Fix:**

```bash
# Check permissions
ls -la .aligntrue/

# Fix directory permissions
chmod 755 .aligntrue/

# Fix file permissions
chmod 644 .aligntrue/config.yaml
chmod 644 .aligntrue/.rules.yaml

# Verify ownership
ls -la .aligntrue/
# Should show your username, not root
```

**Avoid using sudo:**

```bash
# ❌ Don't do this
sudo aligntrue sync

# ✅ Do this instead
# Fix ownership first
sudo chown -R $USER:$USER .aligntrue/
# Then run without sudo
aligntrue sync
```

---

## Getting more help

### Enable verbose logging

```bash
# Set debug environment variable
DEBUG=aligntrue:* aligntrue sync
```

### Check versions

```bash
# CLI version
aligntrue --version

# Node version
node --version

# Package versions
cat package.json | grep aligntrue
```

### Common troubleshooting commands

```bash
# Validate everything
aligntrue check

# Lint markdown
aligntrue md lint

# Preview sync without writing
aligntrue sync --dry-run

# List enabled exporters
cat .aligntrue/config.yaml | grep exporters -A 5
```

### Still stuck?

1. Check [Command Reference](/docs/04-reference/cli-reference) for detailed flag documentation
2. Review [Sync Behavior](/docs/03-concepts/sync-behavior) for expected workflow
3. Open an issue at [github.com/AlignTrue/aligntrue](https://github.com/AlignTrue/aligntrue/issues)

Include in your issue:

- AlignTrue version (`aligntrue --version`)
- Node version (`node --version`)
- Operating system
- Full error message
- Steps to reproduce
